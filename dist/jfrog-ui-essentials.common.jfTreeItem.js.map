{"version":3,"sources":["webpack://jfrog-ui-essentials/./src/components/JfTreeItemComponent/index.vue?9923","webpack://jfrog-ui-essentials/src/components/JfTreeItemComponent/index.vue","webpack://jfrog-ui-essentials/./src/components/JfTreeItemComponent/index.vue?0c0a","webpack://jfrog-ui-essentials/./src/components/JfTreeItemComponent/index.vue"],"names":[],"mappings":";;;;;;;;;;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,uFAAuF,kFAAkF,MAAM,yBAAyB,+BAA+B,6BAA6B,iCAAiC,YAAY,6CAA6C,kFAAkF,EAAE,4BAA4B,OAAO,qKAAqK,kHAAkH,iDAAiD,mIAAmI,EAAE,kEAAkE,yBAAyB,6JAA6J,aAAa,oFAAoF,sCAAsC,qCAAqC,MAAM,yBAAyB,kDAAkD,6BAA6B,uCAAuC,uDAAuD,yCAAyC,gCAAgC,YAAY,mCAAmC,8EAA8E,mCAAmC,8BAA8B,OAAO,iDAAiD;AAC37D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwBA;AACA;AACA;AAEA;AACA,sBADA;AAEA,UACA,MADA,EAEA,QAFA,EAGA,MAHA,CAFA;AAOA,gBACA,QADA,EAEA,UAFA,EAGA,UAHA,EAIA,qBAJA,CAPA;AAaA,MAbA,kBAaA;AACA;AACA;AADA;AAGA,GAjBA;AAkBA,SAlBA,qBAkBA;AACA;AACA,GApBA;AAqBA,SArBA,qBAqBA;AACA;;AACA;;AACA;;AAEA;AAEA;;AACA;;;AAEA;AAEA,GAjCA;AAkCA;AAAA;AAAA,GAlCA;AAmCA;AACA,mBADA,6BACA;AAAA;;AACA;AACA;AACA;AAAA;AAAA;AAAA;;AACA;AACA,WAFA;AAGA,SAJA;AAKA;AACA,KATA;AAUA,gBAVA,0BAUA;AACA;AACA,KAZA;AAaA,uBAbA,+BAaA,QAbA,EAaA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KApBA;AAqBA,mBArBA,6BAqBA;AAAA;;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA,KAzBA;AA0BA,mBA1BA,6BA0BA;AAAA;;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA;;AAQA;AAAA;AAAA;AACA;AACA;AACA,OAHA;AAIA;AAAA;AAAA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KAlDA;AAmDA,qBAnDA,+BAmDA;AACA;AACA,KArDA;AAsDA,cAtDA,wBAsDA;AACA;AACA,KAxDA;AAyDA,iBAzDA,2BAyDA;AACA;AACA,KA3DA;AA4DA,eA5DA,uBA4DA,CA5DA,EA4DA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;;AACA;AACA;AACA;AACA,KArEA;AAsEA,qBAtEA,+BAsEA;AACA;AACA,KAxEA;AAyEA,cAzEA,wBAyEA;AACA;AACA,KA3EA;AA4EA,mBA5EA,6BA4EA;AACA;AACA,KA9EA;AA+EA,oBA/EA,8BA+EA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,SANA,MAOA;AACA;AACA,KA7FA;AA8FA,cA9FA,wBA8FA;AACA;AACA,mCACA;AACA;AACA,KAnGA;AAoGA,oBApGA,8BAoGA;AACA,wGACA,UADA,KAEA;AACA;AACA,sBACA,aADA,KAEA,iCACA;AACA;AACA;AACA,KA/GA;AAgHA,sBAhHA,gCAgHA;AACA;AACA,KAlHA;AAmHA,kBAnHA,4BAmHA;AACA;AACA;AACA;;AACA;AACA,KAxHA;AAyHA,qBAzHA,+BAyHA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAEA;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;AACA;AACA,OARA;;AAUA;AACA;;AACA;AACA;AACA;AACA,kBADA;AAEA;AAFA;AAIA;AACA;AACA;;AACA;AACA;AAtJA;AAnCA,G;;AC7B8U,CAAgB,sIAAG,EAAC,C;;;;;ACAlQ;AACvC;AACL;;;AAGpD;AAC6F;AAC7F,gBAAgB,8CAAU;AAC1B,EAAE,sDAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,0G","file":"jfrog-ui-essentials.common.jfTreeItem.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.refreshHack.count && _vm.getClasses().concat(_vm.getCustomClasses()),style:({height: _vm.tree.viewPane.itemHeight, 'line-height': _vm.tree.viewPane.itemHeight}),on:{\"click\":function($event){return _vm.onItemClick($event)},\"dblclick\":function($event){return _vm.onItemDoubleClick()}}},[_c('div',{staticClass:\"jf-tree-item-container\",style:({height: _vm.tree.viewPane.itemHeight, 'line-height': _vm.tree.viewPane.itemHeight})},[_c('jf-tree-indentation',{attrs:{\"visible\":_vm.tree.api.linesVisible,\"height\":_vm.tree.viewPane.itemHeight,\"lines-backgrounds\":_vm.tree.viewPane.linesBackgrounds,\"indentation\":_vm.getIndentation()}}),(_vm.data.level >= 1 && _vm.tree.api.linesVisible && !_vm.shouldShowExpander() && !_vm.data.$pending)?_c('div',{staticClass:\"no-children-line-extension\",style:({height: _vm.tree.viewPane.itemHeight, 'background-image': 'url(\\'' + _vm.tree.viewPane.linesBackgrounds['horizontal-line'] + '\\')'})}):_vm._e(),(_vm.data.data === _vm.tree.api.GO_UP_NODE)?_c('span',{staticClass:\"drill-back\"},[_vm._v(\"  ..\")]):_vm._e(),(_vm.data.data !== _vm.tree.api.GO_UP_NODE && (_vm.shouldShowExpander() || _vm.data.$pending || _vm.data.level === 0))?_c('div',{directives:[{name:\"init\",rawName:\"v-init\",value:(_vm.initExpander()),expression:\"initExpander()\"}],staticClass:\"node-expander\",style:({height: _vm.tree.viewPane.itemHeight}),on:{\"click\":function($event){_vm.shouldShowExpander() && _vm.toggleExpansion(); $event.stopPropagation();}}},[(_vm.shouldShowExpander())?_c('div',{staticClass:\"action-icon icon icon-addons-arrow-right\"}):_vm._e(),(_vm.data.$pending)?_c('div',{staticClass:\"spinner-msg-local\"},[_c('div',{staticClass:\"icon-hourglass-local\"})]):_vm._e()]):_vm._e(),(_vm.data.data !== _vm.tree.api.GO_UP_NODE)?_c('div',{staticClass:\"jf-tree-item-content\"},[_c('jf-tree-compiled-cell',{attrs:{\"item-id\":_vm.itemId,\"tree-item\":_vm.jfTreeItem}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n    <div :class=\"refreshHack.count && getClasses().concat(getCustomClasses())\" @click=\"onItemClick($event)\" @dblclick=\"onItemDoubleClick()\" :style=\"{height: tree.viewPane.itemHeight, 'line-height': tree.viewPane.itemHeight}\">\n\n        <div class=\"jf-tree-item-container\" :style=\"{height: tree.viewPane.itemHeight, 'line-height': tree.viewPane.itemHeight}\">\n            <jf-tree-indentation :visible=\"tree.api.linesVisible\" :height=\"tree.viewPane.itemHeight\" :lines-backgrounds=\"tree.viewPane.linesBackgrounds\" :indentation=\"getIndentation()\"></jf-tree-indentation>\n            <div class=\"no-children-line-extension\" v-if=\"data.level >= 1 && tree.api.linesVisible && !shouldShowExpander() && !data.$pending\" :style=\"{height: tree.viewPane.itemHeight, 'background-image': 'url(\\'' + tree.viewPane.linesBackgrounds['horizontal-line'] + '\\')'}\">\n            </div>\n            <span class=\"drill-back\" v-if=\"data.data === tree.api.GO_UP_NODE\">&nbsp;&nbsp;..</span>\n            <div class=\"node-expander\" @click=\"shouldShowExpander() && toggleExpansion(); $event.stopPropagation();\" v-init=\"initExpander()\" :style=\"{height: tree.viewPane.itemHeight}\" v-if=\"data.data !== tree.api.GO_UP_NODE && (shouldShowExpander() || data.$pending || data.level === 0)\">\n                <div class=\"action-icon icon icon-addons-arrow-right\" v-if=\"shouldShowExpander()\"></div>\n                <div class=\"spinner-msg-local\" v-if=\"data.$pending\">\n                    <div class=\"icon-hourglass-local\"></div>\n                </div>\n            </div>\n            <div class=\"jf-tree-item-content\" v-if=\"data.data !== tree.api.GO_UP_NODE\">\n                <jf-tree-compiled-cell :item-id=\"itemId\" :tree-item=\"jfTreeItem\">\n                </jf-tree-compiled-cell>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import isArray from 'lodash/isArray';\n    import map from 'lodash/map';\n    import filter from 'lodash/filter';\n\n    export default {\n        name: 'jf-tree-item',\n        props: [\n            'data',\n            'itemId',\n            'tree'\n        ],\n        'jf@inject': [\n            '$scope',\n            '$element',\n            '$timeout',\n            'AdvancedStringMatch'\n        ],\n        data() {\n            return {\n                refreshHack: this.tree.refreshHack\n            };\n        },\n        created() {\n            this.asm = this.AdvancedStringMatch;\n        },\n        mounted() {\n            $(this.$el).prop('comp', this);\n            this._watchSelection();\n            this._watchExpansion();\n\n            this._registerEvents();\n\n            /* (NG2VUE) This was moved from created() to mounted() */\n            /* (NG2VUE) Todo: If any other code in created() depends on this, it should also be moved here. */\n\n            $(this.$element).prop('ctrl', this);\n\n        },\n        ng1_legacy: { 'controllerAs': 'jfTreeItem' },\n        methods: {\n            _registerEvents() {\n                if (this.tree.api.eventsToRegisterOnNode) {\n                    this.tree.api.eventsToRegisterOnNode.forEach(registeredEvent => {\n                        this.tree.api.JFrogEventBus.registerOnScope(this.$scope, registeredEvent.event, (...params) => {\n                            registeredEvent.callback(this.data.data, params);\n                        });\n                    });\n                }\n            },\n            initExpander() {\n                this._syncExpansionClass(this.isExpanded());\n            },\n            _syncExpansionClass(expanded) {\n                let iconElem = $(this.$element).find('.node-expander');\n                if (expanded) {\n                    iconElem.addClass('expanded');\n                } else {\n                    iconElem.removeClass('expanded');\n                }\n            },\n            _watchExpansion() {\n                this.$scope.$watch(() => this.isExpanded(), expanded => this._syncExpansionClass(expanded));\n\n                this.$scope.$watch('jfTreeItem.data', () => this._syncExpansionClass(this.isExpanded()));\n            },\n            _watchSelection() {\n                //This is instead of using ng-class, which not working smoothly in safari\n                let toggleClass = (add, className) => {\n                    if (add) {\n                        $(this.$element).addClass(className);\n                    } else {\n                        $(this.$element).removeClass(className);\n                    }\n                };\n\n                this.$scope.$watch(() => this.tree.api.$freezedSelected || this.tree.api.$selectedNode, selected => {\n                    let iAmSelected = selected === this.data.data;\n                    toggleClass(iAmSelected, 'selected');\n                });\n                this.$scope.$watch(() => this.tree.api.$freezedPreSelected || this.tree.api.$preSelectedNode, preSelected => {\n                    let iAmPreSelected = preSelected === this.data.data;\n                    toggleClass(iAmPreSelected, 'pre-selected');\n                });\n                this.$scope.$watch('jfTreeItem.data', () => {\n                    let iAmPreSelected = (this.tree.api.$freezedPreSelected || this.tree.api.$preSelectedNode) === this.data.data;\n                    let iAmSelected = (this.tree.api.$freezedSelected || this.tree.api.$selectedNode) === this.data.data;\n                    toggleClass(iAmSelected, 'selected');\n                    toggleClass(iAmPreSelected, 'pre-selected');\n                });\n            },\n            _getTreeContainer() {\n                return $(this.tree.$element).find('.jf-tree-container');\n            },\n            isSelected() {\n                return this.tree.api._isSelected(this.data);\n            },\n            isPreSelected() {\n                return this.tree.api._isPreSelected(this.data);\n            },\n            onItemClick(e) {\n                if (e.type === 'click') {\n                    if (this.data.data === this.tree.api.GO_UP_NODE) {\n                        this.tree.api.drillUp();\n                    } else {\n                        this.tree.api._setSelected(this.data);\n                        this.tree.api.fire('item.clicked', this.data.data);\n                    }\n                }\n            },\n            onItemDoubleClick() {\n                this.tree.api.fire('item.dblClicked', this.data.data);\n            },\n            isExpanded() {\n                return this.tree.viewPane.isNodeOpen(this.data.data);\n            },\n            toggleExpansion() {\n                this.tree.api.toggleExpansion(this.data.data);\n            },\n            isQuickFindMatch() {\n                let elem = $(this.$element).find('.jf-tree-item-content .node-text');\n                if (elem.length) {\n                    let text = elem.text();\n                    elem.unhighlight();\n                    if (text && this.tree.api.quickFindTerm) {\n                        let asmResponse = this.asm.match(text, this.tree.api.quickFindTerm);\n                        if (asmResponse.matched) {\n                            this.asm.highlight(elem, asmResponse.segments);\n                        }\n                        return asmResponse.matched;\n                    } else\n                        return false;\n                }\n            },\n            getClasses() {\n                let classes = ['jf-tree-item-vue'];\n                if (this.isQuickFindMatch())\n                    classes.push('quick-find-match');\n                return classes;\n            },\n            getCustomClasses() {\n                if (!this.data.data || this.data.data === this.tree.api.GO_UP_NODE || !this.tree.api.classGetter)\n                    return [];\n                else {\n                    let classes = this.tree.api.classGetter(this.data.data);\n                    if (!classes)\n                        classes = [];\n                    else if (!isArray(classes))\n                        classes = [classes];\n                    return classes;\n                }\n            },\n            shouldShowExpander() {\n                return this.data.hasChildren && !this.data.data.$noChildren && !this.data.$pending;\n            },\n            getIndentation() {\n                if (!this.data.data.$indentation) {\n                    this.createIndentation();\n                }\n                return this.data.data.$indentation;\n            },\n            createIndentation() {\n                if (!this.tree.api.linesVisible) {\n                    this.$set(this.data.data, '$indentation', map(new Array(this.data.level), i => ({})));\n                    return;\n                }\n\n                let flats = this.data.pane.$flatItems;\n                let isLastChild = item => {\n                    if (item.$isLastChild === undefined) {\n                        let parent = item.parent;\n                        let children = filter(flats, { parent });\n                        let index = children.indexOf(item);\n                        item.$isLastChild = index !== -1 && index === children.length - 1;\n                    }\n                    return item.$isLastChild;\n                };\n\n                let indentation = [];\n                let relevantItem = this.data;\n                for (let i = this.data.level - 1; i >= 0; i--) {\n                    let isLast = isLastChild(relevantItem);\n                    let unit = {\n                        index: i,\n                        background: i === this.data.level - 1 ? isLast ? 'last-connection-point' : 'connection-point' : isLast ? '' : 'vertical-line'\n                    };\n                    indentation.push(unit);\n                    relevantItem = relevantItem.parent;\n                }\n                this.$set(this.data.data, '$indentation', indentation.reverse());\n            }\n        }\n    }\n\n</script>\n\n<style scoped lang=\"less\">\n\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=12d09ce3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12d09ce3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}