(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[32],{7678:function(e,t,n){},c024:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.webworkerOk||2===e.previewersCount?n("div",{staticClass:"jf-markup-editor",class:{"has-editor-label":e.editorLabel}},[n("div",{staticClass:"controls"},[e.editorLabel?n("div",{staticClass:"editor-label",class:{"editor-label-position":e.isInEditMode()}},[e._v("\n                "+e._s(e.editorLabel)+"\n            ")]):e._e(),e.showControls&&e.isEditable?n("div",{staticClass:"lang-select-wrapper"},[n("jf-ui-select",{staticClass:"form-group-cell",attrs:{"jf-select-disabled":!e.isInEditMode(),"jf-select-options":["Markdown","Asciidoc","Plain Text"]},on:{"jf-select-change":e.onLanguageChange},model:{value:e.currentLanguage,callback:function(t){e.currentLanguage=t},expression:"currentLanguage"}})],1):e._e(),e.showControls?n("div",{staticClass:"switch-wrapper"},[n("jf-switch",{ref:"switchController",staticClass:"no-margin-top",attrs:{options:e.modeOptions},on:{input:function(t){return e.onChangeModeInternal()}},model:{value:e.currentMode,callback:function(t){e.currentMode=t},expression:"currentMode"}})],1):e._e(),!e.showControls&&e.isEditable?n("button",{staticClass:"btn btn-default edit-button",attrs:{type:"button"},on:{click:function(t){return e.activateEditor()}}},[e.value&&e.value.length>0?n("span",[n("i",{staticClass:"icon icon-edit-pen"}),n("span",[e._v("Edit")])]):e._e(),e.value&&0!==e.value.length?e._e():n("span",[n("i",{staticClass:"icon icon-new"}),n("span",[e._v("Add")])])]):e._e()]),e.isInEditMode()?n("div",{staticClass:"code-mirror-wrapper codemirror-wrapper"},["Markdown"===e.currentLanguage?n("jf-code-mirror",{key:e.currentLanguage,attrs:{"mime-type":"text/x-markdown",mode:"gfm","allow-edit":!0,height:"100%",autofocus:!e.preventAutoFocus,"enable-copy-to-clipboard":"value && value.length","clipboard-copy-entity-name":"text",value:e.value},on:{input:function(t){return e.$emit("input",arguments[0])}}}):e._e(),"Asciidoc"===e.currentLanguage?n("jf-code-mirror",{key:e.currentLanguage,attrs:{"mime-type":"text/x-markdown",mode:"asciidoc","allow-edit":!0,height:"100%",autofocus:!e.preventAutoFocus,"enable-copy-to-clipboard":"value && value.length","clipboard-copy-entity-name":"text",value:e.value},on:{input:function(t){return e.$emit("input",arguments[0])}}}):e._e(),"Plain Text"===e.currentLanguage?n("jf-code-mirror",{key:e.currentLanguage,attrs:{"allow-edit":!0,height:"100%",autofocus:!e.preventAutoFocus,"enable-copy-to-clipboard":"value && value.length","clipboard-copy-entity-name":"text",value:e.value},on:{input:function(t){return e.$emit("input",arguments[0])}}}):e._e(),e.onSave?n("button",{staticClass:"btn btn-primary save-button pull-right",on:{click:function(t){return e.onSaveClick()}}},[e._v("\n                Save\n            ")]):e._e(),e.hideCancelButton?e._e():n("button",{staticClass:"btn btn-secondary clancel-button pull-right",on:{click:function(t){return e.onCancel()}}},[e._v("\n                Cancel\n            ")])],1):e._e(),e.isInEditMode()?e._e():n("div",{staticClass:"preview-wrapper"},[n("div",{staticClass:"preview",class:{"empty-preview":!e.preview||0===e.preview.length},domProps:{innerHTML:e._s(e.preview)}}),e.preview?e._e():n("div",{staticClass:"no-markup"},[n("span",[e._v("No markup available.")]),e._v("Â \n                "),!e.showControls&&e.isEditable?n("a",{staticClass:"jf-link",on:{click:function(t){return t.preventDefault(),e.activateEditor()}}},[e._v("\n                    Add markup.\n                ")]):e._e()])])]):e._e()])},i=[],a=(n("a481"),n("0b04")),o="Preview",s="Edit",u={name:"jf-markup-editor",props:["value","previewRenderers","language","mode","editable","showControls","hideCancelButton","editorLabel","preventAutoFocus"],"jf@inject":["$timeout","$scope","JFrogUIWebWorker"],mixins:[a["a"]],data:function(){return{webworkerOk:null,previewersCount:null,modeOptions:null,onSave:null,preview:"",currentLanguage:this.language||"Markdown",currentMode:this.mode||s,isEditable:this.editable,renderers:this.previewRenderers}},created:function(){this.EDIT_MODE=s,this.PREVIEW_MODE=o,this.instanceId=Math.floor(1e10*Math.random()),this.JFrogUIWebWorker=new this.JFrogUIWebWorker},mounted:function(){var e=this;this.checkPreviewers(),2===this.previewersCount?this.init():this.JFrogUIWebWorker.check().then((function(){e.JFrogUIWebWorker.open(),e.webworkerOk=!0,e.init()})).catch((function(){console.error("jf-code-mirror: Error: No preview render callback defined and WebWorker is not available.")})),this.$scope.$on("$destroy",(function(){e.webworkerOk&&e.JFrogUIWebWorker.close()}))},ng1_legacy:{controllerAs:"jfMarkup"},methods:{init:function(){var e=this;this.value||this.$emit("input",""),this.markupBackup=this.value,this.languageBackup=this.currentLanguage,void 0===this.isEditable&&(this.isEditable=!0),this.modeOptions=[s,o],this.updatePreviewButton(),this.$scope.$watch("jfMarkup.value",(function(){e.canRenderPreview()&&e.renderPreview()}))},setPreview:function(e){this.preview=this.$sanitize(e)},currentLanguageHasPreviewRenderer:function(){return this.renderers&&this.renderers[this.currentLanguage.toLowerCase()]},canRenderPreview:function(){return this.webworkerOk&&!this.currentLanguageHasPreviewRenderer()},renderPreview:function(){var e=this;"plain text"===this.currentLanguage.toLowerCase()?this.setPreview(this.value.replace(/\n/g,"<br>")):this.currentLanguageHasPreviewRenderer()?this.renderers[this.currentLanguage.toLowerCase()](this.value,(function(t){return e.setPreview(t)})):(this.webworkerOk,this.currentLanguage,this.currentLanguage.toLowerCase(),this.instanceId&&this.JFrogUIWebWorker.markupPreview(this.currentLanguage.toLowerCase(),this.value,this.instanceId).then((function(t){return e.setPreview(t)})))},updatePreviewButton:function(){this.modeOptions=[s,o]},onLanguageChange:function(){var e=this;this.updatePreviewButton(),this.preview="",this.canRenderPreview()&&this.renderPreview(),this.$timeout((function(){return e.$refs.switchController.updateOptionObjects()}))},onChangeModeInternal:function(){this.currentMode===o&&this.renderPreview(),this.$emit("on-mode-change",{mode:this.currentMode})},checkPreviewers:function(){this.renderers?this.renderers.markdown&&this.renderers.asciidoc?this.previewersCount=2:(this.renderers.markdown||this.renderers.asciidoc)&&(this.previewersCount=1):(this.renderers={},this.previewersCount=0)},onCancel:function(){var e=this;this.$timeout((function(){e.currentLanguage=e.languageBackup,e.$emit("input",e.markupBackup),e.preview="",e.renderPreview(),e.currentMode=o,e.showControls=!1}))},onSaveClick:function(){var e=this;this.$timeout((function(){"function"===typeof e.onSave&&(e.languageBackup=e.currentLanguage,e.markupBackup=e.value,e.$emit("on-save"),e.showControls=!1)}))},activateEditor:function(){this.currentMode=s,this.showControls=!0},isInEditMode:function(){return this.showControls&&this.currentMode===this.EDIT_MODE}}},c=u,l=(n("fabd"),n("2877")),d=Object(l["a"])(c,r,i,!1,null,"339da561",null);t["default"]=d.exports},fabd:function(e,t,n){"use strict";n("7678")}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfMarkupEditor.js.map