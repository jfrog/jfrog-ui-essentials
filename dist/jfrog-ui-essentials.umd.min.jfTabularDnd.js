(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[48],{"268b":function(e,t,s){},"530d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"jf-tabular-dnd",attrs:{tabindex:"0",disabled:e.disabled}},[s("div",{staticClass:"tabular-dnd-table-container available-table",class:{"no-data":!e.availableItems.length&&(!e.availableItemsTableOptions||!e.availableItemsTableOptions.draggedRow&&!e.availableItemsTableOptions.draggedRows)&&!e.selectedItems.length&&(!e.selectedItemsTableOptions||!e.selectedItemsTableOptions.draggedRow&&!e.selectedItemsTableOptions.draggedRows)}},[s("jf-table-view-wrapper",{attrs:{options:e.availableItemsTableOptions,data:e.availableItems}})],1),s("div",{staticClass:"dnd-actions-wrap"},[s("ul",{staticClass:"dnd-actions"},[s("li",[s("span",{staticClass:"dnd-exclude-all",attrs:{disabled:e.isIncludeListEmpty()||e.areAllRowsDisabled(e.selectedItemsTableOptions.getFilteredData())||e.disabled},on:{click:function(t){return e.excludeAll()}}},[e._v("«\n                ")])]),s("li",[s("span",{staticClass:"dnd-exclude-selected",attrs:{disabled:!e.isIncludeListItemSelected()||e.disabled},on:{click:function(t){return e.excludeSelected()}}},[e._v("‹\n                ")])]),s("li",[s("span",{staticClass:"dnd-include-selected",attrs:{disabled:!e.isExcludeListItemSelected()||e.disabled},on:{click:function(t){return e.includeSelected()}}},[e._v("›\n                ")])]),s("li",[s("span",{staticClass:"dnd-include-all",attrs:{disabled:e.isExcludeListEmpty()||e.areAllRowsDisabled(e.availableItemsTableOptions.getFilteredData())||e.disabled},on:{click:function(t){return e.includeAll()}}},[e._v("»\n                ")])])])]),s("div",{staticClass:"tabular-dnd-table-container selected-table"},[s("jf-table-view-wrapper",{attrs:{options:e.selectedItemsTableOptions,data:e.selectedItems}})],1)])])},l=[],i=(s("28a5"),s("768b")),n=s("75fc"),r=(s("ac6a"),s("8a30")),c=s.n(r),o=s("c04c"),d=s.n(o),b=s("dd61"),h=s.n(b),m=s("0644"),u=s.n(m),p=s("4cfe"),I=s.n(p),f=s("e2a0"),g=s.n(f),O=s("1a8c"),v=s.n(O),T=s("9380"),C=s.n(T),w=s("9b3d"),D=void 0,_={name:"jf-tabular-dnd",components:{JfTableViewWrapper:w["default"]},props:["availableItems","selectedItems","itemClassAttr","itemDraggableAttr","columns","numberOfRows","availableItemsColumns","selectedItemsColumns","entityName","appScope","disableWholeRowSelection","disabled"],"jf@inject":["$element","$scope","JFrogTableViewOptions"],data:function(){return{availableItemsTableOptions:null,selectedItemsTableOptions:null,availableItemsColumnsVar:this.availableItemsColumns,selectedItemsColumnsVar:this.selectedItemsColumns,currNumberOfRows:this.numberOfRows||8}},created:function(){this.columns&&(this.availableItemsColumnsVar=u()(this.columns),this.selectedItemsColumnsVar=u()(this.columns)),this.createTables()},watch:{availableItems:function(e){return D&&D.watchListChanges&&D.watchListChanges(e)},selectedItems:function(e){return D&&D.watchListChanges&&D.watchListChanges(e)}},ng1_legacy:{controllerAs:"jfTabularDnD"},methods:{watchListChanges:function(e){this._refreshBothTables(),this._fireOnChange()},createAutoColumns:function(){var e=this;["availableItemsColumnsVar","selectedItemsColumnsVar"].forEach((function(t){var s,a=h()(e[t],(function(e){return v()(e)?e:g()(e)?{field:e}:void 0}));(s=e[t]).splice.apply(s,[0,e[t].length].concat(Object(n["a"])(a)))}))},createTables:function(){var e=this;this.createAutoColumns(),this.availableItemsTableOptions=new this.JFrogTableViewOptions(this.appScope||this.$scope),this.selectedItemsTableOptions=new this.JFrogTableViewOptions(this.appScope||this.$scope);var t={height:50*this.currNumberOfRows+"px","line-height":50*this.currNumberOfRows+"px"};this.availableItemsTableOptions._registerTabularDnd(this,"available",this.selectedItemsTableOptions,t),this.selectedItemsTableOptions._registerTabularDnd(this,"selected",this.availableItemsTableOptions,t);var s=this._getObjectNames(),a=s.availableObjectName,l=s.selectedObjectName;if(this.availableItemsTableOptions.setColumns(this.availableItemsColumnsVar).setSelection(this.availableItemsTableOptions.MULTI_SELECTION).setPaginationMode(this.availableItemsTableOptions.VIRTUAL_SCROLL).showPagination(!1).setDraggable().setRowsPerPage(parseInt(this.currNumberOfRows)).setObjectName(a).setRowClassAttr(this.itemClassAttr).disableFilterWhen((function(){return e.disabled})).setEmptyTableText(this.availableItems.length||this.selectedItems.length?"Drag row here":"No data found"),this.selectedItemsTableOptions.setColumns(this.selectedItemsColumnsVar).setSelection(this.selectedItemsTableOptions.MULTI_SELECTION).setPaginationMode(this.selectedItemsTableOptions.VIRTUAL_SCROLL).showPagination(!1).setDraggable().setRowsPerPage(parseInt(this.currNumberOfRows)).setObjectName(l).setRowClassAttr(this.itemClassAttr).disableFilterWhen((function(){return e.disabled})).setEmptyTableText("Drag row here"),this.$set(this.selectedItemsTableOptions,"isRowSelectable",this.$set(this.availableItemsTableOptions,"isRowSelectable",(function(t){return e._isItemDraggable(t.entity)}))),!this.disableWholeRowSelection){var i=function(t){e.disabled||e.itemDraggableAttr&&!1===t.entity[e.itemDraggableAttr]||e.$set(t.entity,"$selected",!t.entity.$selected)};this.availableItemsTableOptions.on("row.clicked",i),this.selectedItemsTableOptions.on("row.clicked",i)}this.availableItemsTableOptions.on("row.clicked",(function(t){return e.$emit("on-row-click",{row:t.entity,list:"available"})})),this.selectedItemsTableOptions.on("row.clicked",(function(t){return e.$emit("on-row-click",{row:t.entity,list:"selected"})})),this.availableItemsTableOptions.on("selection.change",(function(){e.disabled&&e.availableItemsTableOptions.clearSelection()})),this.selectedItemsTableOptions.on("selection.change",(function(){e.disabled&&e.selectedItemsTableOptions.clearSelection()})),this.$scope.$watch("jfTabularDnD.disabled",(function(){e.disabled&&(e.selectedItemsTableOptions.clearSelection(),e.availableItemsTableOptions.clearSelection())}))},_getObjectNames:function(){var e,t;if(this.entityName)if(-1!==this.entityName.indexOf("/")){var s=this.entityName.split("/"),a=Object(i["a"])(s,2),l=a[0],n=a[1];e="Available "+l+"/Available "+n,t="Included "+l+"/Included "+n}else e="Available "+this.entityName,t="Included "+this.entityName;else e="Available Item",t="Included Item";return{availableObjectName:e,selectedObjectName:t}},areAllRowsDisabled:function(e){var t=this;if(!this.itemDraggableAttr||!e)return!1;var s=C()(e,(function(e){return e.hasOwnProperty("".concat(t.itemDraggableAttr))&&!1===e[t.itemDraggableAttr]}));return s.length===e.length},isIncludeListEmpty:function(){return!this.selectedItemsTableOptions||!this.selectedItemsTableOptions.dirCtrl||!this.selectedItemsTableOptions.getFilteredData().length},isExcludeListEmpty:function(){return!this.availableItemsTableOptions||!this.availableItemsTableOptions.dirCtrl||!this.availableItemsTableOptions.getFilteredData().length},isIncludeListItemSelected:function(){if(!this.selectedItemsTableOptions||!this.selectedItemsTableOptions.dirCtrl)return!1;var e=this.selectedItemsTableOptions.getSelected();this.selectedItemsTableOptions.getFilteredData();return!!e.length},isExcludeListItemSelected:function(){if(!this.availableItemsTableOptions||!this.availableItemsTableOptions.dirCtrl)return!1;var e=this.availableItemsTableOptions.getSelected(),t=this.availableItemsTableOptions.getFilteredData();return e=C()(e,(function(e){return c()(t,e)})),!!e.length},excludeAll:function(){var e;if(!this.isIncludeListEmpty()&&!this.disabled){var t=this.selectedItemsTableOptions.getSelected();t.forEach((function(e){return delete e.$selected})),this.$set(this.selectedItemsTableOptions.dirCtrl,"allSelected",!1);var s=this.selectedItemsTableOptions.getFilteredData();s=this._getOnlyDraggables(s),(e=this.availableItems).splice.apply(e,[this.availableItems.length,0].concat(Object(n["a"])(s))),d()(this.selectedItems,(function(e){return c()(s,e)})),this._refreshBothTables(),this._fireOnChange()}},includeAll:function(){var e;if(!this.isExcludeListEmpty()&&!this.disabled){var t=this.availableItemsTableOptions.getSelected();t.forEach((function(e){return delete e.$selected})),this.$set(this.availableItemsTableOptions.dirCtrl,"allSelected",!1);var s=this.availableItemsTableOptions.getFilteredData();s=this._getOnlyDraggables(s),(e=this.selectedItems).splice.apply(e,[this.selectedItems.length,0].concat(Object(n["a"])(s))),d()(this.availableItems,(function(e){return c()(s,e)})),this._refreshBothTables(),this._fireOnChange()}},excludeSelected:function(){var e;if(this.isIncludeListItemSelected()&&!this.disabled){var t=this.selectedItemsTableOptions.getSelected();t.forEach((function(e){return delete e.$selected})),this.$set(this.selectedItemsTableOptions.dirCtrl,"allSelected",!1);var s=this.selectedItemsTableOptions.getFilteredData();d()(t,(function(e){return!c()(s,e)})),t=this._getOnlyDraggables(t),(e=this.availableItems).splice.apply(e,[this.availableItems.length,0].concat(Object(n["a"])(t))),d()(this.selectedItems,(function(e){return c()(t,e)})),this._refreshBothTables(),this._fireOnChange()}},includeSelected:function(){var e;if(this.isExcludeListItemSelected()&&!this.disabled){var t=this.availableItemsTableOptions.getSelected();t.forEach((function(e){return delete e.$selected})),this.$set(this.availableItemsTableOptions.dirCtrl,"allSelected",!1);var s=this.availableItemsTableOptions.getFilteredData();d()(t,(function(e){return!c()(s,e)})),t=this._getOnlyDraggables(t),(e=this.selectedItems).splice.apply(e,[this.selectedItems.length,0].concat(Object(n["a"])(t))),d()(this.availableItems,(function(e){return c()(t,e)})),this._refreshBothTables(),this._fireOnChange()}},_getOnlyDraggables:function(e){var t=this;return this.itemDraggableAttr?C()(e,(function(e){return t._isItemDraggable(e)})):e},_isItemDraggable:function(e){return!this.itemDraggableAttr||(I()(e[this.itemDraggableAttr])||e[this.itemDraggableAttr])},_refreshBothTables:function(){[this.availableItemsTableOptions,this.selectedItemsTableOptions].forEach((function(e){e.update(),e.refreshFilter(),e.dirCtrl.vsApi.refresh()}))},onDragTransfer:function(e,t){e.forEach((function(e){return delete e.$selected})),t.dirCtrl.allSelected=!1,this._fireOnChange()},_fireOnChange:function(){this.$emit("on-change",{available:this.availableItems,selected:this.selectedItems})}}},S=_,y=(s("92a0"),s("2877")),A=Object(y["a"])(S,a,l,!1,null,"3d7e7e76",null);t["default"]=A.exports},"92a0":function(e,t,s){"use strict";s("268b")}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfTabularDnd.js.map