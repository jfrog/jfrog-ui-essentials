(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[21],{"271b":function(t,e,i){"use strict";i("65c1")},"65c1":function(t,e,i){},"94d4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"jf-field",class:{"sticky-errors":t.dontPushDownErrors}},[i("div",{class:{"input-label":t.animated}},[i("validation-provider",{attrs:{rules:t.inferredRules,events:["input","focus"],name:t.validationDomain},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return i("div",{},[i("div",{class:{invalid:n.length&&!t.focused}},[t._t("default")],2),n.length&&!t.focused?i("div",{staticClass:"field-validation-error"},t._l(n,(function(e){return i("div",{staticClass:"jf-validation"},[t._v("\n                            "+t._s(e)+"\n                        ")])})),0):t._e()])}}],null,!0)})],1)])])},o=[],s=(i("28a5"),i("cadf"),i("456d"),i("ac6a"),i("7f7f"),i("7514"),i("7bb1")),l={name:"jf-field",components:{ValidationProvider:s["a"]},"jf@inject":["JFrogEventBus","JFrogUILibConfig","$timeout","$rootScope","$scope"],props:["animated","validations","validationRules","customValidations","validationsParams","autofocus","invalidateOnSubmit","alwaysShowErrors","dontValidateDisabled","delayedInit","dontPushDownErrors"],data:function(){return{focused:!1,inferredRules:"",formField:null,inputElement:null,inputName:"",validationDomain:this.validations||"common"}},mounted:function(){this.inputElement=this.$element.find("input"),this.inputElement.length||(this.inputElement=this.$element.find("textarea")),this.inputElement.length&&(this.inputName=this.inputElement[0].attributes["name"]?this.inputElement[0].attributes["name"].value:"",this.formField=this.$element.parents("form")[0].attributes["name"]?window[this.$element.parents("form")[0].attributes["name"].value][this.inputName]:null,this.inferRules(),this.init())},methods:{init:function(){var t=this,e=this.JFrogEventBus.getEventsDefinition(),i=function(){t.formField&&(t.formField.initialValue=!0),t.$scope.$watch((function(){return t.autofocus}),(function(){return t.focusInput()})),t.JFrogEventBus.registerOnScope(t.$scope,e.FORM_SUBMITTED,t._onFormSubmitted),t.JFrogEventBus.registerOnScope(t.$scope,e.FORM_CLEAR_FIELD_VALIDATION,(function(e){t._onBlur(e),t.formField&&(t.formField.preventShowErrors=!0)})),t.$scope.$on("$destroy",(function(){t.inputElement.off("blur"),t.inputElement.off("keyup"),t.inputElement.off("keydown"),t.inputElement.off("focus")})),t.inputElement.on("keydown",(function(){return t._onKeyDown()})),!t.invalidateOnSubmit&&t.validationDomain&&(t.inputElement.on("blur",(function(){return t._onBlur()})),t.inputElement.on("keyup",(function(){return t._onKeyUp()}))),(t.invalidateOnSubmit||t.validationDomain)&&t.inputElement.on("focus",(function(){return t._onFocus()})),t.dontValidateDisabled&&t.$rootScope.$watch((function(){return t.inputElement[0].disabled}),(function(){return t._onDisabledChanged(t.inputElement[0].disabled)})),t.focusInput()};this.delayedInit?this.$timeout((function(){return i()})):i()},focusInput:function(){var t=this;this.autofocus&&"false"!=this.autofocus&&(this.formField&&(this.formField.isAutoFocused=!0,this.formField.isAutoFocusedFlag=!0),this.$timeout((function(){if(t.inputElement.scrollParent&&t.inputElement.scrollParent()){var e=t.inputElement.scrollParent().scrollTop();t.inputElement.focus(),t.inputElement.scrollParent().scrollTop(e)}else t.inputElement.focus()})))},_onDisabledChanged:function(t){this.formField.showErrors=!t},_onFormSubmitted:function(t){!t||this.form.$name===t&&!this.formField.$valid?this.formField&&(this.formField.showErrors=!0):this.formField&&(this.formField.showErrors=!1)},_onBlur:function(t){var e=this;this.focused=!1,this.$timeout((function(){e.formField&&(t?e.formField.showErrors=!1:e.formField.preventShowErrors||(e.formField.showErrors=!0))})),this.formField&&this.formField.isAutoFocused&&(this.formField.isAutoFocusedFlag?this.formField.isAutoFocusedFlag=!1:(this.formField.isAutoFocused=!1,this.formField.showErrors=!0))},_onFocus:function(){var t=this;this.focused=!0,this.$timeout((function(){t.formField&&(t.formField.showErrors=!1,t.formField.preventShowErrors=!1)}))},_onKeyDown:function(){this.formField&&(this.formField.initialValue=!1,this.formField.isAutoFocusedFlag=!1)},_onKeyUp:function(){var t=this.inputElement.val();null!==t&&void 0!==t&&""!==t?this.inputElement.addClass("hascontent"):this.inputElement.removeClass("hascontent")},inferRules:function(){var t={},e=this.inputElement[0].attributes;if(e.required&&(t.required=!0),e.type&&("email"===e.type.value?t.email=!0:"url"===e.type.value?t.url=!0:"number"===e.type.value?t.decimal=!0:"date"===e.type.value?t.date_format="YYYY-MM-DD":"datetime-local"===e.type.value?t.date_format="YYYY-MM-DDThh:mm":"time"===e.type.value?t.date_format="YYYY-Www":"week"===e.type.value?t.date_format="hh:mm":"month"===e.type.value&&(t.date_format="YYYY-MM")),e.min&&(t.min_value=e.min.value),e.max&&(t.max_value=e.max.value),e.pattern&&(t.regex=e.pattern.value),this.customValidations&&(t.customValidations=this.customValidations,Object.keys(this.customValidations).forEach((function(e){t[e]=!0}))),this.validationRules)if(_.isObject(this.validationRules))_.extend(t,this.validationRules);else if(_.isString(this.validationRules)){var i=this.validationRules.split("|").map((function(t){return _.trim(t)}));i.forEach((function(e){var i=e.split(":")[0],n=e.substr(i.length);t[i]=n}))}this.inferredRules=t}}},u=l,r=(i("271b"),i("2877")),a=Object(r["a"])(u,n,o,!1,null,"7e763e16",null);e["default"]=a.exports}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfField.js.map