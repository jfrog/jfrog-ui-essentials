(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[49],{"506b":function(t,e,i){},"9e68":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"jf-text-box-container"},[i("div",{staticClass:"jf-text-box-content-current"},[t._v(t._s(t.content)+" "),t.ready&&t.isOverflowing?i("span",{staticClass:"jf-text-box-show-all",style:{"white-space":t.wrapSeeAll?"inherit":"nowrap"},domProps:{innerHTML:t._s(t.seeAllCustomText)},on:{click:function(e){return t.seeAll()}}}):t._e()]),i("div",{staticClass:"jf-text-box-content-full"}),i("div",{staticClass:"jf-text-box-content-stage"})])])},s=[],l=(i("7514"),i("097d"),i("28a5"),i("0b04")),h={name:"jf-text-box",props:["text","modalTitle","seeAllText","maxLines","noAction","customAction"],"jf@inject":["$scope","$element","$timeout","$interval","$compile","$q","JfFullTextService"],mixins:[l["a"]],data:function(){return{content:null,ready:null,wrapSeeAll:null}},mounted:function(){var t=this;this.fullTextElement.text(this.sanitizedText),this.registerResize(),setTimeout((function(){return t.refreshText()})),this.fullTextModal=this.JfFullTextService},beforeDestroy:function(){this.deregisterResize()},methods:{registerResize:function(){var t=this,e=function(){t.refreshText(),t.$forceUpdate()},i=_.debounce(e,0,{leading:!0});this.onResize=i,$(window).on("resize",this.onResize)},deregisterResize:function(){$(window).off("resize",this.onResize)},setStageText:function(t){this.stageElement.text(t)},refreshText:function(){var t=this;if(this.measureLineHeight(),this.isOverflowing){this.stageElement.html("");var e=this.splitText(this.sanitizedText),i=1,n=function(i){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.setStageText(_.trimEnd(e.slice(0,i).join(""))+(n?" ":"")),n&&t.stageElement.append($('  <div class="jf-text-box-show-all">'.concat(t.seeAllCustomText,"</div>"))),t.numOfStageRows()};while(n(i)<=this.numOfWholeRows&&i<=e.length)i++;n(i,!1)!==n(i)?this.wrapSeeAll=!0:this.wrapSeeAll=!1;var s=e.slice(0,i);this.setStageText(_.trimEnd(s.join(""))+(this.isOverflowing?" ":"")),this.isOverflowing&&this.stageElement.append($('<div class="jf-text-box-show-all">'.concat(this.seeAllCustomText,"</div>")));var l=0;while(this.numOfStageRows()>this.numOfWholeRows&&i>l)l++,s=e.slice(0,i-l),this.setStageText(_.trimEnd(s.join(""))+(this.isOverflowing?" ":"")),this.isOverflowing&&this.stageElement.append($('<div class="jf-text-box-show-all">'.concat(this.seeAllCustomText,"</div>")));this.content=_.trimEnd(s.join(""))}else this.content=this.sanitizedText;this.ready=!0,this.$forceUpdate()},numOfStageRows:function(){var t=this.stageElement.height();return Math.ceil(t/this.lineHeight-.1)},splitText:function(t){if(this.splitCache)return this.splitCache;var e=/\s+/g,i=[],n=e.exec(t),s=0;while(n)i.push(t.substr(s,n.index-s)+n[0]),s=n.index+n[0].length,n=e.exec(t);return i.push(t.substr(s,t.length-s)),i=_.map(i,(function(t){return t.length>16?t.split(""):t})),i=_.flatten(i),this.splitCache=i,i},measureLineHeight:function(){this.stageElement.text("*"),this.lineHeight=this.stageElement.height(),this.maxLines&&this.containerElement.height(parseInt(this.maxLines)*this.lineHeight)},seeAll:function(){var t=this;if(!this.noAction){var e=this.sanitizedText;if(this.customAction)this.customAction({text:e});else{var i=this.fullTextModal.showFullTextModal(e,this.modalTitle||"Full Text",500,!1,null,"text-box-show-all-modal");this.deregisterResize(),i.result.finally((function(){setTimeout((function(){return t.registerResize()}))}))}}}},computed:{seeAllCustomText:function(){return this.seeAllText?this.$sanitize(this.seeAllText):"(Show All ...)"},sanitizedText:function(){return this.$sanitize(this.text)},containerElement:{get:function(){return this.cachedContainerElement||(this.cachedContainerElement=$(this.$element).find(".jf-text-box-container")),this.cachedContainerElement}},fullTextElement:{get:function(){return this.cachedFullTextElement||(this.cachedFullTextElement=$(this.$element).find(".jf-text-box-content-full")),this.cachedFullTextElement}},currentTextElement:{get:function(){return this.cachedCurrentTextElement||(this.cachedCurrentTextElement=$(this.$element).find(".jf-text-box-content-current")),this.cachedCurrentTextElement}},stageElement:{get:function(){return this.cachedStageElement||(this.cachedStageElement=$(this.$element).find(".jf-text-box-content-stage")),this.cachedStageElement}},containerHeight:{get:function(){return this.containerElement.height()}},containerWidth:{get:function(){return this.containerElement.width()}},numOfWholeRows:{get:function(){var t=Math.floor(this.containerHeight/this.lineHeight+.1);return this.maxLines?Math.min(parseInt(this.maxLines),t):t}},numOfActualRows:{get:function(){var t=this.fullTextElement.height();return Math.ceil(t/this.lineHeight-.1)}},numOfVisibleRows:{get:function(){var t=this.currentTextElement.height();return Math.ceil(t/this.lineHeight-.1)}},isOverflowing:{get:function(){return this.numOfActualRows>this.numOfWholeRows}}}},o=h,r=(i("a2bc"),i("2877")),a=Object(r["a"])(o,n,s,!1,null,"530a5424",null);e["default"]=a.exports},a2bc:function(t,e,i){"use strict";i("506b")}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfTextBox.js.map