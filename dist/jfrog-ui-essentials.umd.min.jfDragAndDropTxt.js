(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[16],{"35ac":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"drag-and-drop-txt-wrapper",class:{"ready-for-upload":e.shouldDisplayUploadIcon()}},[e.dndHeadingHtml?n("label",{domProps:{innerHTML:e._s(e.sanitizedHeaderHtml)}}):e._e(),n("jf-field",{attrs:{autofocus:e.autofocus}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.dndContent,expression:"dndContent"}],staticClass:"input-text monospaced",style:e.dndStyle,attrs:{name:"dndtext",required:e.dndRequired,spellcheck:"false"},domProps:{value:e.dndContent},on:{input:[function(t){t.target.composing||(e.dndContent=t.target.value)},function(t){return e.dndChange()}]}}),n("label",{staticClass:"call-to-action-label",class:{"icon-upload":e.shouldDisplayUploadIcon()},domProps:{innerHTML:e._s(e.sanitizedCallToAction)}})])],1)])},a=[],r=(n("7f7f"),n("7514"),n("0b04")),o={name:"jf-drag-and-drop-txt",props:["dndContent","dndHeadingHtml","dndStyle","dndRequired","dndCallToAction","dndAutoFocus"],"jf@inject":["$scope","$element","$attrs","JFrogNotifications"],mixins:[r["a"]],data:function(){return{}},created:function(){this.draggedFileSizeLimit=400,this.entered=!1},mounted:function(){this.$element.bind("dragover",this.handleDragEnter.bind(this)),this.$element.bind("dragleave",this.handleDragLeave.bind(this)),this.$element.bind("drop",this.handleDropEvent.bind(this))},ng1_legacy:{controllerAs:"jfDragAndDropTxt"},methods:{shouldDisplayUploadIcon:function(){return""===$(this.$element).find("textarea").val()&&!$(this.$element).is(".over")},onFileLoadSuccess:function(e){this.dndContent=e.target.result,$(this.$element).find("textarea").focus(),null!==this.dndChange&&this.$emit("dnd-change")},onFileLoadFailure:function(e){var t="Unable to access license file.";"SecurityError"===e.target.error.name&&(t+="<br> The file is either unsafe or being used by another application."),null!==this.dndOnError?this.$emit("dnd-on-error",{msg:t}):this.JFrogNotifications.create({error:t})},handleDropEvent:function(e){var t=this;this.entered=!1,this.toggleDragEffect(),e.preventDefault(),e.stopPropagation();var n=new FileReader,i=e.originalEvent.dataTransfer.files[0];n.onload=function(e){t.onFileLoadSuccess(e)},n.onerror=function(e){t.onFileLoadFailure(e)};var a=Math.round(i.size/1e3);if(a>this.draggedFileSizeLimit){var r="File exceeds the maximum size of "+this.draggedFileSizeLimit+" KB";return null!==this.dndOnError?this.$emit("dnd-on-error",{msg:r}):this.JFrogNotifications.create({error:r}),!1}n.readAsText(i)},callingCodeShouldEnd:function(e){var t=!1;try{3==e.relatedTarget.nodeType&&(t=!0)}catch(n){}return e.target===e.relatedTarget&&(t=!0),t},handleDragEnter:function(e){if(e.preventDefault(),e.stopPropagation(),!this.callingCodeShouldEnd(e))return this.entered?void 0:(this.entered=!0,this.toggleDragEffect(),e.originalEvent.dataTransfer.effectAllowed="copy",!1)},handleDragLeave:function(e){if(e.preventDefault(),e.stopPropagation(),!this.callingCodeShouldEnd(e))return this.entered?(this.entered=!1,this.toggleDragEffect(),!1):void 0},toggleDragEffect:function(){var e=$(this.$element).find(".drag-and-drop-txt-wrapper");e.toggleClass("over")}},computed:{autofocus:function(){return void 0===this.dndAutoFocus||this.dndAutoFocus},sanitizedHeaderHtml:function(){return this.text?this.$sanitize(this.dndHeadingHtml):""},sanitizedCallToAction:function(){return this.text?this.$sanitize(this.dndCallToAction):"Copy your text or\n<b>drop a file</b>"}}},d=o,s=n("2877"),l=Object(s["a"])(d,i,a,!1,null,"42db6ef9",null);t["default"]=l.exports}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfDragAndDropTxt.js.map