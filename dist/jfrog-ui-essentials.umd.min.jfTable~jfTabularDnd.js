(("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]=("undefined"!==typeof self?self:this)["webpackJsonpjfrog_ui_essentials"]||[]).push([[0],{"0814":function(t,e,i){"use strict";i("154a")},"154a":function(t,e,i){},"9b3d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("jf-table-view",{ref:"tableView",attrs:{options:t.tableOptions}},[t._t("external-filters",null,{slot:"external-filters"})],2)},o=[],n=i("e730"),a={name:"jf-table-view-wrapper",components:{JfTableView:n["default"]},props:["options","objectName","tableId","data","columns","actions","batchActions","scope","rowsPerPage","emptyTableText","useVirtualScroll","enableSubrows","sortBy","sortDir","groupBy","showFilter","showPagination","showCounter","sortable","disableFilterTooltip","externalSearchFields","newEntityCustomText","disableNewEntity","emptyTableCallToAction","emptyTableAction","externalSortCallback","keyField","hideSelectAll","singleRowSelection","rowClassAttr"],"jf@inject":["JFrogTableViewOptions","$q","$scope"],data:function(){return{tableOptions:null,columnsSet:!1}},watch:{data:{deep:!0,handler:function(t){t&&t!==this.tableOptions.data&&this.setData()}},externalSearchFields:function(t){this.tableOptions.externalSearchFields=t,this.tableOptions.paginationMode!==this.tableOptions.INFINITE_SCROLL&&this.tableOptions.paginationMode!==this.tableOptions.INFINITE_VIRTUAL_SCROLL||this.tableOptions.sendInfiniteScrollRequest(!0),this.tableOptions.paginationMode===this.tableOptions.EXTERNAL_PAGINATION&&this.tableOptions.sendExternalPageRequest()}},created:function(){var t=this;this.tableOptions=this.options||new this.JFrogTableViewOptions(this.scope||this.$scope),_.isUndefined(this.enableSubrows)||this.tableOptions.enableSubRows(),_.isUndefined(this.hideSelectAll)||this.tableOptions.hideSelectAll(),this.tableId&&this.tableOptions.setId(this.tableId),this.objectName&&this.tableOptions.setObjectName(this.objectName),this.rowsPerPage&&(_.isString(this.rowsPerPage)&&"auto"!==this.rowsPerPage&&console.error("Error: rows-per-page should be a number, or the string 'auto'."),this.tableOptions.setRowsPerPage(this.rowsPerPage)),this.$watch((function(){return t.getActualColumns()}),(function(){t.columns&&(t.tableOptions.setColumns(t.getActualColumns()),t.columnsSet=!0)}),{immediate:!0}),this.actions&&this.tableOptions.setActions(this.actions),this.batchActions&&this.tableOptions.setBatchActions(this.batchActions),this.emptyTableText&&this.tableOptions.setEmptyTableText(this.emptyTableText),this.emptyTableCallToAction&&this.tableOptions.setEmptyTableCallToAction(this.emptyTableCallToAction),this.emptyTableAction&&this.tableOptions.setEmptyTableAction(this.emptyTableAction),this.groupBy&&this.tableOptions.groupBy(this.groupBy),this.sortBy&&this.tableOptions.sortBy(this.sortBy),this.sortDir&&"desc"===this.sortDir&&this.tableOptions.reverseSortingDir(),this.keyField&&this.tableOptions.setKey(this.keyField),this.singleRowSelection&&this.tableOptions.setSelection(this.tableOptions.SINGLE_SELECTION),_.isUndefined(this.showFilter)||this.tableOptions.showFilter(this.showFilter),_.isUndefined(this.showPagination)||this.tableOptions.showPagination(this.showPagination),_.isUndefined(this.showCounter)||this.tableOptions.showCounter(this.showCounter),_.isUndefined(this.sortable)||this.tableOptions.setSortable(this.sortable),_.isUndefined(this.useVirtualScroll)||this.$listeners["load-more"]||this.tableOptions.setPaginationMode(this.tableOptions.VIRTUAL_SCROLL),_.isUndefined(this.disableFilterTooltip)||this.tableOptions.disableFilterTooltip(),_.isUndefined(this.externalSearchFields)||(this.tableOptions.externalSearchFields=this.externalSearchFields),_.isUndefined(this.newEntityCustomText)||(this.tableOptions.newEntityCustomText=this.newEntityCustomText),_.isUndefined(this.rowClassAttr)||this.tableOptions.setRowClassAttr(this.rowClassAttr),this.options||this.$emit("init",{tableOptions:this.tableOptions,cellTemplateGenerators:this.JFrogTableViewOptions.cellTemplateGenerators}),!_.isUndefined(this.disableNewEntity)&&this.disableNewEntity||!this.$listeners["new-entity"]||this.tableOptions.setNewEntityAction((function(){t.$emit("new-entity")})),this.$listeners["pagination-change"]&&this.tableOptions.on("pagination.change",(function(e){t.$emit("pagination-change",{eventData:e})})),this.$listeners["row-clicked"]&&this.tableOptions.on("row.clicked",(function(e){t.$emit("row-clicked",{eventData:e})})),this.$listeners["selection-change"]&&this.tableOptions.on("selection.change",(function(e){t.$emit("selection-change",{eventData:e})})),this.$listeners["external-sort"]&&this.tableOptions.useExternalSortCallback((function(e,i){t.$emit("external-sort",{field:e,dir:i})})),this.$listeners["load-more"]&&(this.tableOptions.setPaginationMode(_.isUndefined(this.useVirtualScroll)?this.tableOptions.INFINITE_SCROLL:this.tableOptions.INFINITE_VIRTUAL_SCROLL,(function(e){var i=t.$q.defer();return t.$emit("load-more",e),t.pageResolver=i.resolve,i.promise})),this.sortable&&this.tableOptions.setSortable(!0)),window.store.subscribeAction((function(e){var i=e.type,s=e.payload;if("CHANGE_TABLE_PAGINATION"===i){var o=s.tableId,n=s.toPage,a=void 0===n?1:n;t.$refs.tableView&&o===t.$refs.tableView.options.tableId&&(t.$refs.tableView.$refs.top.$refs.pagination?t.$refs.tableView.$refs.top.$refs.pagination.paginationApi.setPage(a):t.$refs.tableView.currentPage=0)}}))},mounted:function(){var t=this;this.data&&this.setData(!0),this.$listeners["page-needed"]&&this.tableOptions.setPaginationMode(this.tableOptions.EXTERNAL_PAGINATION,(function(e){var i=t.$q.defer();return t.$emit("page-needed",e),t.pageResolver=i.resolve,i.promise}))},methods:{setData:function(t){this.$listeners["page-needed"]||this.$listeners["load-more"]||this.tableOptions.paginationMode===this.tableOptions.EXTERNAL_PAGINATION?t||!this.$listeners["load-more"]||this.pageResolver?this.pageResolver&&(this.pageResolver(this.data),this.pageResolver=null):this.tableOptions.setData(this.data.data,"$$internal$$"):this.data&&!_.isUndefined(this.data.isUpdate)&&this.data.data?this.data.isUpdate?this.tableOptions.updateData(this.data.data,this.data.removeIfMissing):this.tableOptions.setData(this.data.data):(this.tableOptions.setData(this.data),this.tableOptions.refreshFilter())},getActualColumns:function(){return _.isFunction(this.columns)?this.JFrogTableViewOptions?this.columns({cellTemplateGenerators:this.JFrogTableViewOptions.cellTemplateGenerators}):null:this.columns}}},l=a,r=i("2877"),p=Object(r["a"])(l,s,o,!1,null,"5edb9f6c",null);e["default"]=p.exports},e730:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"jf-table-view",staticStyle:{clear:"both"},attrs:{id:t.options.tableId}},[i("div",{staticClass:"new-entity-wrapper"},[t.options&&t.options.newEntityCallback?i("a",{staticClass:"new-entity",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.createNewEntity()}}},[i("i",{staticClass:"icon icon-new"}),t.options&&!t.options.newEntityCustomText?i("span",[t._v("Add "+t._s(t.options.useAnWithObjectName?"an":"a")+" "+t._s(t.objectName?t.objectName.split("/")[0]:t.options.objectName?t.options.objectName.split("/")[0]:"Item"))]):t._e(),t.options&&t.options.newEntityCustomText?i("span",[t._v(t._s(t.options.newEntityCustomText))]):t._e()]):t._e()]),i("jf-table-top",{ref:"top",attrs:{"total-records":t.getTotalRecords(),"table-view":t.jfTableView}},[t._t("external-filters",null,{slot:"external-filters"})],2),t.options&&t.options.columnsCustomization?i("div",{staticClass:"columns-customization-wrap"},[i("div",{staticClass:"columns-customization pull-right"},[i("jf-multi-dropdown",{attrs:{title:"Columns","no-filter":"true","filter-placeholder":"Filter Columns",items:t.options.availableColumns,"on-change":"options.updateCustomizedColumns()"}})],1)]):t._e(),t.options?i("div",{staticClass:"jf-table-view-container"},[t.options&&t.options.headersVisible?i("div",{staticClass:"jf-table-view-header"},[i("jf-table-row",{attrs:{"table-view":t.jfTableView,"row-id":"headers",data:t.options.headersRow}})],1):t._e(),!t.options||t.options.paginationMode!==t.options.VIRTUAL_SCROLL&&t.options.paginationMode!==t.options.INFINITE_VIRTUAL_SCROLL?t._e():i("div",{staticClass:"table-rows-container",style:{height:t.getActualPageHeight()+"px"}},[i("jf-vscroll",{attrs:{"with-each":"entity","prevent-default-scroll":this.options.pendingInfiniteScroll,in:t.options.getPrePagedData(),api:t.vsApi}},[i("div",{pre:!0},[i("div",{pre:!0,attrs:{"v-if":"is_last() && options && options.pendingInfiniteScroll && options.paginationMode === options.INFINITE_VIRTUAL_SCROLL",":style":"{height: options.rowHeight}",class:"loading-more"}},[i("div",{pre:!0,attrs:{class:"spinner-msg-local"}},[i("div",{pre:!0,attrs:{class:"icon-hourglass-local"}})])]),i("jf-table-row",{pre:!0,attrs:{"v-else":"",":table-view":"jfTableView",":row-id":"v_index()",":data":"entity"}})],1)])],1),t.options&&t.options.paginationMode!==t.options.VIRTUAL_SCROLL&&t.options.paginationMode!==t.options.INFINITE_VIRTUAL_SCROLL?i("div",{staticClass:"table-rows-container"},t._l(t.options.getPageData(),(function(e,s){return i("jf-table-row",{key:s,attrs:{"table-view":t.jfTableView,"row-id":s,data:e}})})),1):t._e(),!t.options||!t.options.dataWasSet||t.options.getRawData().length||t.options.pendingExternalPaging||t.options.externalTotalCount&&0!==t.options.externalTotalCount.total?t._e():i("div",{staticClass:"empty-table-placeholder",style:t.options.registeredTabularDnd?t.options.registeredTabularDnd.emptyTableStyle:{}},[i("p",[i("span",[t._v(t._s(t.emptyTableText))]),t.options.emptyTableAction&&t.options.emptyTableCallActionText?i("a",{staticClass:"jf-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.options.emptyTableAction()}}},[t._v(t._s(t.options.emptyTableCallActionText))]):t._e()])]),t.options&&t.noFilterResults?i("div",{staticClass:"empty-table-placeholder filter-no-results"},[i("div",[t._v(t._s(t.noFilterResultsText))]),t.tableFilter?i("a",{staticClass:"jf-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.clearFilter()}}},[t._v("Clear filter")]):t._e()]):t._e(),t.options&&t.options.pendingInfiniteScroll&&t.options.paginationMode!==t.options.INFINITE_VIRTUAL_SCROLL?i("div",{staticClass:"loading-more",style:{height:t.options.rowHeight}},[t._m(0)]):t._e()]):t._e()],1)])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spinner-msg-local"},[i("div",{staticClass:"icon-hourglass-local"})])}],n=(i("8e6e"),i("d225")),a=i("b0b4"),l=(i("28a5"),i("bd86"));i("ac6a"),i("cadf"),i("456d"),i("7514");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={name:"jf-table-view",props:["options","objectName"],"jf@inject":["$scope","$element","$timeout","$compileComp","$rootScope","JFrogEventBus"],data:function(){var t=this;return{vsApi:{onInit:function(){t.vsApi.registerScrollListener((function(e){return t.onVScroll(e)}))}},noFilterResults:null,tableFilter:null,currentPage:0,allSelected:!1,jfTableView:this,cellScopes:[],cellComponents:[]}},created:function(){var t=this;this.EVENTS=this.JFrogEventBus.getEventsDefinition(),this.$scope.$watch("jfTableView.options",(function(e){t.options&&t.options.dirCtrl!==t&&t.options._setDirectiveController(t),t.options&&!t.paginationApi&&(t.paginationApi=new c(t),t.paginationApi.registerChangeListener((function(){t.refresh(!1),t._fireDebouncedRowsInView(),t.options._normalizeWidths()})),t.currentPage=0)}));var e=function(){t.options._normalizeWidths(),t._fireDebouncedRowsInView(),t.$forceUpdate(),t.vsApi&&t.vsApi.refresh&&t.vsApi.refresh()};$(window).on("resize",e),this.$scope.$on("$destroy",(function(){$(window).off("resize",e)}))},mounted:function(){this.$containerElement=this.$element.find(".jf-table-view"),this._handleDocumentClick()},ng1_legacy:{controllerAs:"jfTableView"},methods:{clearFilter:function(){this.tableFilter="",this.onUpdateFilter()},getActualPageHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?$(this.$element).parent().height()-$(this.$element).find(".table-rows-container").position().top:"auto"===this.options.rowsPerPage&&$(this.$element).find(".table-rows-container").length?Math.min($(this.$element).parent().height()-$(this.$element).find(".table-rows-container").position().top,parseFloat(this.options.rowHeight)*this.options.getPrePagedData().length):parseFloat(this.options.rowHeight)*Math.min(this.options.rowsPerPage,this.options.getPrePagedData().length)+2},compileTemplate:function(t,e){var i=_.find(this.options.columns,{field:t}),s="headers"!==e?this.options.getPageData()[e]:this.options.headersRow;if(s){if(s.$groupHeader){var o={};_.set(o,s.$groupHeader.field,s.$groupHeader.value),s=o}var n,a=_.find(this.cellScopes,(function(t){return t.row.uid===e&&t.col.field===i.field}));if(a){var l=this.cellScopes.indexOf(a),r=this.cellComponents[l],h=p(p({},a),{},{row:{}});return h.row.entity=s,h.row.uid=e,{comp:r,props:h}}n={row:{entity:s,uid:e},col:i,MODEL_COL_FIELD:_.get(s,t),COL_FIELD:_.get(s,t),appScope:this.options.appScope,grid:{appScope:this.options.appScope},table:{options:this.options}},this.cellScopes.push(n);var c="headers"!==e?i.cellTemplate:i.headerCellTemplate,u=$("<div>"+c+"</div>");this._autoAddEllipsisClass(u),c=u.html();var d=this.$compileComp(c,{},this.options.appScope&&this.options.appScope.$comp);return d.props=Object.keys(n),this.cellComponents.push(d),{comp:d,props:n}}},_autoAddEllipsisClass:function(t){var e=t.text(),i=null,s=function t(s){for(var o=s.children(),n=null,a=0;a<o.length;a++){var l=$(o[a]);if(l.text()===e){n=l;break}}n?t(n):i=s};s(t),i&&(i.is("[disable-tooltip-on-overflow]")||i.attr("v-jf-tooltip-on-overflow",""),i.addClass("overflow-ellipsis"))},onUpdateFilter:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.refreshFilter(),this.refresh(),t&&(this.paginationApi.setPage(1,!0),this.paginationApi.update())},refresh:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.getPageData();this.paginationApi&&t&&this.paginationApi.update(),this.$forceUpdate()},clearSelection:function(){var t=this;this.options.getRawData().forEach((function(e){return t.$delete(e,"$selected")})),this.allSelected=!1},toggleSelectAll:function(){var t=this;this.allSelected=!this.allSelected,this.options.getPrePagedData().forEach((function(e){t.options.isRowSelectable&&!t.options.isRowSelectable({entity:e})?t.$set(e,"$selected",!1):t.$set(e,"$selected",t.allSelected)})),this.options.groupedBy&&this.options.getFilteredData().forEach((function(e){t.options.isRowSelectable&&!t.options.isRowSelectable({entity:e})?t.$set(e,"$selected",!1):t.$set(e,"$selected",t.allSelected)}))},onVScroll:function(t){var e=Math.floor(t);this.currentPage=Math.floor((e+this.options.rowsPerPage-1)/this.options.rowsPerPage),this.paginationApi.update(),this._fireDebouncedRowsInView()},_fireDebouncedRowsInView:function(){if(this.options.hasListenersFor("row.in.view"));},getTotalScrollHeight:function(){return this.options.getPrePagedData().length*parseFloat(this.options.rowHeight)+"px"},getScrollWidth:function(){var t=$(this.$element).find(".scroll-faker-container")[0];return t.offsetWidth-t.clientWidth},createNewEntity:function(){var t=this;this.options.newEntityCallback(),this.$timeout((function(){return t.onUpdateFilter()}))},groupSelection:function(t){var e={};_.set(e,t.$groupHeader.field,t.$groupHeader.value);var i=_.filter(this.options.getFilteredData(),e);i.forEach((function(e){return e.$selected=t.$selected}))},initFilter:function(){var t=this;this.$timeout((function(){if(t.options&&t.options.autoFocusFilter){var e=$(t.$element).find(".jf-table-filter input");e.focus()}}))},getTotalRecords:function(){if(this.options){var t=0;return t=this.options.paginationMode===this.options.EXTERNAL_PAGINATION?this.options.getTotalLengthOfData():_.filter(this.options.getFilteredData(),(function(t){return!t.$parentRow})).length,this.options.data&&(t-=_.filter(this.options.data,{$doNotCount:!0}).length),t+" "+this.getObjectNameByCount(t)}},getObjectNameByCount:function(t,e){var i;if(e=e||this.options.objectName,e)if(e.indexOf("/")>=0){var s=e.split("/");i=1!==t?s[1]:s[0]}else i=1!==t?e+"s":e;else i=1!==t?"records":"record";return _.startCase(i)},getSelectedRecords:function(){if(!this.options)return 0;var t=this.options.getSelectedRows().length;return t},_handleDocumentClick:function(){var t=this,e=function(e){t.$timeout((function(){var i=!$(e.target).parents(".jf-table-cell.actions").length||$(e.target).parents(".jf-table-view")[0]!==$(t.$element).find(".jf-table-view")[0];i&&t.JFrogEventBus.dispatch(t.EVENTS.TABLEVIEW_HIDE_ACTIONS_DROPDOWN,t)}))};$(document).on("click",e),this.$scope.$on("$destroy",(function(){$(document).off("click",e)}))}},computed:{emptyTableText:function(){return this.options.emptyTableText||"There is no data to display"},noFilterResultsText:function(){return this.options.noFilterResultsText||"Current filter has no results."}}},c=function(){function t(e){Object(n["a"])(this,t),this.tableCtrl=e}return Object(a["a"])(t,[{key:"getTotalPages",value:function(){return Math.ceil(this.tableCtrl.options.getTotalLengthOfData()/this.tableCtrl.options.rowsPerPage)}},{key:"getCurrentPage",value:function(){return this.tableCtrl.currentPage+1}},{key:"nextPage",value:function(){this.getCurrentPage()!==this.getTotalPages()&&(this.tableCtrl.currentPage++,this.syncVirtualScroll(),this.update(),this.sendExternalPageRequest(),this.tableCtrl.options.fire("pagination.change",this.getCurrentPage()))}},{key:"prevPage",value:function(){1!==this.getCurrentPage()&&(this.tableCtrl.currentPage--,this.syncVirtualScroll(),this.update(),this.sendExternalPageRequest(),this.tableCtrl.options.fire("pagination.change",this.getCurrentPage()))}},{key:"sendExternalPageRequest",value:function(){this.tableCtrl.options.paginationMode===this.tableCtrl.options.EXTERNAL_PAGINATION&&this.tableCtrl.options.sendExternalPageRequest()}},{key:"setPage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t<1||t>this.getTotalPages()||(this.tableCtrl.currentPage=t-1,this.syncVirtualScroll(e),this.update(),this.sendExternalPageRequest(),this.tableCtrl.options.fire("pagination.change",this.getCurrentPage()))}},{key:"update",value:function(){var t=this;this.getCurrentPage()>this.getTotalPages()&&this.setPage(1,!0),this.listeners&&this.listeners.forEach((function(e){return e(t.getCurrentPage())}))}},{key:"registerChangeListener",value:function(t){this.listeners||(this.listeners=[]),this.listeners.push(t)}},{key:"syncVirtualScroll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tableCtrl.options.paginationMode===this.tableCtrl.options.VIRTUAL_SCROLL&&this.tableCtrl.vsApi.scrollTo(this.tableCtrl.currentPage*this.tableCtrl.options.rowsPerPage,t?0:500)}}]),t}(),u=h,d=(i("0814"),i("2877")),f=Object(d["a"])(u,s,o,!1,null,"e85e4d42",null);e["default"]=f.exports}}]);
//# sourceMappingURL=jfrog-ui-essentials.umd.min.jfTable~jfTabularDnd.js.map